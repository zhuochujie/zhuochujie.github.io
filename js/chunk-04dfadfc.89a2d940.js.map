{"version":3,"sources":["webpack:///./src/views/Airdrop.vue","webpack:///./src/views/Airdrop.vue?9958","webpack:///./src/views/Airdrop.vue?7dfc"],"names":["class","style","tokenAddress","placeholder","content","rows","type","chainType","label","approve","transfer","name","contractAddress","methods","this","split","list","addressList","amountList","forEach","e","push","tokenContract","tronWeb","contract","at","hash","send","$message","timer","setInterval","async","transaction","trx","getTransaction","ret","clearInterval","contractRet","success","message","error","getList","decimals","call","Math","pow","amounts","map","x","String","tokenTransferContract","tokenSend","feeLimit","console","log","TRC20Approve","TRC20Transfer","render"],"mappings":"gJACOA,MAAM,W,GACJA,MAAM,Q,EACT,eAAkE,MAA9DC,MAAA,gDAAgD,aAAS,G,EAQ7D,eAEC,QAFKA,MAAA,sCACH,0BAAsB,G,iBAGkB,O,iBACD,iC,GAErCD,MAAM,W,iBACiC,M,iBACE,M,8IAnBlD,eAwBM,MAxBN,EAwBM,CAvBJ,eAsBM,MAtBN,EAsBM,CArBJ,EACA,eAAyD,G,WAAtC,EAAAE,a,qCAAA,EAAAA,aAAY,GAAEC,YAAY,W,uBAC7C,eAKE,G,WAJS,EAAAC,Q,qCAAA,EAAAA,QAAO,GACfC,KAAM,EACPC,KAAK,WACLH,YAAY,W,uBAEd,EAGA,eAGI,YAFJ,eAAyD,G,WAAtC,EAAAI,U,qCAAA,EAAAA,UAAS,GAAEC,MAAM,Q,yBAAO,IAAG,C,2BAC9C,eAAkF,G,WAA/D,EAAAD,U,qCAAA,EAAAA,UAAS,GAAEC,MAAM,O,yBAAM,IAA6B,C,6BAEvE,eAGM,MAHN,EAGM,CAFJ,eAAwD,GAA7CF,KAAK,SAAU,QAAO,EAAAG,S,yBAAS,IAAE,C,wBAC5C,eAA0D,GAA/CH,KAAK,UAAW,QAAO,EAAAI,U,yBAAU,IAAE,C,8BASvC,OACbC,KAAM,UACN,OACE,MAAO,CACLT,aAAc,GACdU,gBAAiB,qCAGjBR,QAAS,GACTG,UAAW,OAGfM,QAAS,CACP,QACE,OAAOC,KAAKV,QAAQW,MAAM,OAE5B,QAAQC,GACN,IAAIC,EAAc,GACdC,EAAa,GAKjB,OAJAF,EAAKG,QAASC,IACZH,EAAYI,KAAKD,EAAEL,MAAM,KAAK,IAC9BG,EAAWG,KAAKD,EAAEL,MAAM,KAAK,MAExB,CAACE,EAAaC,IAEvB,qBACE,IAAII,QAAsBC,QAAQC,WAAWC,GAAGX,KAAKZ,cACjDwB,QAAaJ,EACdb,QACCK,KAAKF,gBACL,kFAEDe,OACDb,KAAKc,SAAS,QAChB,IAAIC,EAAQC,YAAYC,UACtB,IAAIC,QAAoBT,QAAQU,IAAIC,eAAeR,GAC5B,MAAnBM,EAAYG,MACdC,cAAcP,GACwB,WAAlCG,EAAYG,IAAI,GAAGE,YACrBvB,KAAKc,SAASU,QAAQ,CACpBC,QAAS,OACTjC,KAAM,YAGRQ,KAAKc,SAASY,MAAM,QAAUR,EAAYG,IAAI,GAAGE,eAGpD,OAEL,sBACE,IAAItB,EAAQD,KAAKC,QACbC,EAAOF,KAAK2B,QAAQ1B,GAEpBO,QAAsBC,QAAQC,WAAWC,GAAGX,KAAKZ,cACjDwC,QAAiBpB,EAAcoB,WAAWC,OAC9CD,EAAWE,KAAKC,IAAI,GAAIH,GACxB,IAAII,EAAU9B,EAAK,GAAG+B,KAAI,SAAUC,GAClC,OAAOC,OAAOD,EAAIN,MAGhBQ,QAA8B3B,QAC/BC,WACAC,GAAGX,KAAKF,iBAEX,IACE,IAAIc,QAAawB,EAChBC,UAAUrC,KAAKZ,aAAcc,EAAK,GAAI8B,GACtCnB,KAAK,CAAEyB,SAAU,eAClBtC,KAAKc,SAAS,QAChB,IAAIC,EAAQC,YAAYC,UACtB,IAAIC,QAAoBT,QAAQU,IAAIC,eAAeR,GAC5B,MAAnBM,EAAYG,MACdC,cAAcP,GACwB,WAAlCG,EAAYG,IAAI,GAAGE,YACrBvB,KAAKc,SAASU,QAAQ,CACpBC,QAAS,OACTjC,KAAM,YAGRQ,KAAKc,SAASY,MAAM,QAAUR,EAAYG,IAAI,GAAGE,eAGpD,MACD,MAAOG,GACPa,QAAQC,IAAId,GACZ1B,KAAKc,SAASY,MAAM,UAGxB,UAC2B,KAAtB1B,KAAKZ,aAIc,SAAnBY,KAAKP,UACNO,KAAKyC,eACsB,QAAnBzC,KAAKP,UACbO,KAAKc,SAASY,MAAM,SAEpB1B,KAAKc,SAASY,MAAM,SARpB1B,KAAKc,SAASY,MAAM,cAWxB,iBAC2B,KAAtB1B,KAAKZ,aAIc,SAAnBY,KAAKP,UACNO,KAAK0C,gBACsB,QAAnB1C,KAAKP,UACbO,KAAKc,SAASY,MAAM,SAEpB1B,KAAKc,SAASY,MAAM,SARpB1B,KAAKc,SAASY,MAAM,gB,UC/H5B,EAAOiB,OAASA,EAED,gB,oCCPf,W","file":"js/chunk-04dfadfc.89a2d940.js","sourcesContent":["<template>\n  <div class=\"airdrop\">\n    <div class=\"base\">\n      <h2 style=\"text-align: center; margin-bottom: 20px\">Token批量转账</h2>\n      <el-input v-model=\"tokenAddress\" placeholder=\"token地址\" />\n      <el-input\n        v-model=\"content\"\n        :rows=\"4\"\n        type=\"textarea\"\n        placeholder=\"输入地址和金额\"\n      />\n      <span style=\"color: #ff0000; font-size: 14px\"\n        >PS:每行一条记录,地址与转账金额用逗号分割</span\n      >\n      <div>\n      <el-radio v-model=\"chainType\" label=\"tron\">波场链</el-radio>\n      <el-radio v-model=\"chainType\" label=\"eth\">类ETH链(BSC,HECO,OKex,Matic...)</el-radio>\n    </div>\n      <div class=\"btn-con\">\n        <el-button type=\"danger\" @click=\"approve\">授权</el-button>\n        <el-button type=\"primary\" @click=\"transfer\">转账</el-button>\n      </div>\n\n      \n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Airdrop\",\n  data() {\n    return {\n      tokenAddress: \"\",\n      contractAddress: 'TNUdoLQpu3n9YvGbyeYfeB4JAvA8JaCKdj',//主网\n      // tokenAddress: \"TFjJf7RLzYerBfCjekWt77YqCTbK6Rp7Cm\",//Shasta测试币\n      // contractAddress: \"TVyHoEfYEMaJ5cp5kdm81qzpV57A9Aymx9\", //Shasta\n      content: \"\",\n      chainType: null\n    };\n  },\n  methods: {\n    split() {\n      return this.content.split(\"\\n\");\n    },\n    getList(list) {\n      let addressList = [];\n      let amountList = [];\n      list.forEach((e) => {\n        addressList.push(e.split(\",\")[0]);\n        amountList.push(e.split(\",\")[1]);\n      });\n      return [addressList, amountList];\n    },\n    async TRC20Approve() {\n      let tokenContract = await tronWeb.contract().at(this.tokenAddress);\n      let hash = await tokenContract\n        .approve(\n          this.contractAddress,\n          \"115792089237316195423570985008687907853269984665640564039457584007913129639935\"\n        )\n        .send();\n        this.$message('正在授权')\n      let timer = setInterval(async () => {\n        let transaction = await tronWeb.trx.getTransaction(hash);\n        if (transaction.ret != null) {\n          clearInterval(timer);\n          if (transaction.ret[0].contractRet == \"SUCCESS\") {\n            this.$message.success({\n              message: '授权成功',\n              type: 'success'\n            })\n          } else {\n            this.$message.error(\"授权失败:\" + transaction.ret[0].contractRet);\n          }\n        }\n      }, 1500);\n    },\n    async TRC20Transfer() {\n      let split = this.split();\n      let list = this.getList(split);\n\n      let tokenContract = await tronWeb.contract().at(this.tokenAddress);\n      let decimals = await tokenContract.decimals().call();\n      decimals = Math.pow(10, decimals);\n      let amounts = list[1].map(function (x) {\n        return String(x * decimals);\n      });\n\n      let tokenTransferContract = await tronWeb\n        .contract()\n        .at(this.contractAddress);\n\n      try {\n        let hash = await tokenTransferContract\n        .tokenSend(this.tokenAddress, list[0], amounts)\n        .send({ feeLimit: \"1000000000\" });\n        this.$message('正在转账')\n      let timer = setInterval(async () => {\n        let transaction = await tronWeb.trx.getTransaction(hash);\n        if (transaction.ret != null) {\n          clearInterval(timer);\n          if (transaction.ret[0].contractRet == \"SUCCESS\") {\n            this.$message.success({\n              message: '转账成功',\n              type: 'success'\n            })\n          } else {\n            this.$message.error(\"转账失败:\" + transaction.ret[0].contractRet);\n          }\n        }\n      }, 1500);\n      } catch (error) {\n        console.log(error)\n        this.$message.error(\"转账失败\");\n      }\n    },\n    approve() {\n      if(this.tokenAddress === '') {\n        this.$message.error(\"请输入代币合约地址\");\n        return;\n      }\n      if(this.chainType === 'tron') {\n        this.TRC20Approve();\n      } else if(this.chainType === 'eth') {\n        this.$message.error(\"还没有去写\");\n      } else {\n        this.$message.error(\"必须选择链\");\n      }\n    },\n    async transfer() {\n      if(this.tokenAddress === '') {\n        this.$message.error(\"请输入代币合约地址\");\n        return;\n      }\n      if(this.chainType === 'tron') {\n        this.TRC20Transfer();\n      } else if(this.chainType === 'eth') {\n        this.$message.error(\"还没有去写\");\n      } else {\n        this.$message.error(\"必须选择链\");\n      }\n    },\n  },\n};\n</script>\n\n<style>\n.base {\n  width: 380px;\n  margin: 0 auto;\n}\n\n.base > * {\n  margin: 10px 0;\n}\n\n.btn-con {\n  display: flex;\n  justify-content: space-between;\n}\n\n@media screen and (max-width: 380px) {\n  .base {\n    width: 80%;\n  }\n}\n</style>","import { render } from \"./Airdrop.vue?vue&type=template&id=0fed2bcb\"\nimport script from \"./Airdrop.vue?vue&type=script&lang=js\"\nexport * from \"./Airdrop.vue?vue&type=script&lang=js\"\n\nimport \"./Airdrop.vue?vue&type=style&index=0&id=0fed2bcb&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Airdrop.vue?vue&type=style&index=0&id=0fed2bcb&lang=css\""],"sourceRoot":""}